# 톤필드 장력 시각화 시스템 - 최종 기술 분석 문서 v2.1

## 📋 문서 개요

**최종 업데이트**: 2025-11-16 (v2.1)
**대상 컴포넌트**: `TonefieldTensionDiagram.tsx`
**목적**: 핸드팬 톤필드의 물리적 장력 분포를 다층 SVG 시각화로 표현
**기술 스택**: React 19, TypeScript, SVG, Tailwind CSS
**핵심 설계 원칙**: **"장력이 모이는 림 근처에 시각 정보 밀도 집중"**

---

## 🎯 시스템 목표 및 물리적 배경

### 물리적 원리
핸드팬의 톤필드는 금속 표면에 딤플을 타격하여 형성된 타원형 영역입니다.
- **중심 (딤플)**: 고정점 역할, 장력의 기준점
- **림 (외곽 경계)**: 장력이 최대로 집중되는 지점
- **중간 영역**: 중심에서 림으로 갈수록 장력이 증가

### 시각화 목표
1. **장력 분포 레벨** - 림 집중 등고선으로 표현
2. **방사형 장력 방향** - 딤플에서 림으로 뻗는 직선 (팽팽함)
3. **금속 표면 곡률** - 강화된 상/하 그라데이션 (3D 볼록)
4. **장력의 방향성 흐름** - 벡터 필드 패턴 (진동)
5. **테두리 압박 효과** - 확장된 인워드 섀도우 (깊이)
6. **장력 경계 명확화** - 림 안쪽 밝은 벨트 (경계 하이라이트)
7. **고정점 구조** - 림 앵커 틱 마크 (24개 고정점)
8. **외부 응력 전파** - 리플 엣지 (미세 파동)

---

## 🏗️ 최종 레이어 구조

### 활성화된 레이어 (8개)

```
렌더링 순서 (Z-Index: 하위 → 상위)

1. [Base] 벡터 필드 그라데이션        24개 섹터, sine wave 패턴
2. [Base] 기본 방사형 그라데이션      중심→외곽 그라데이션
3. [Overlay] 멤브레인 쉐이딩 ⚡       상/하 대비 강화 (0.35/0.24)
4. [Lines] 등고선 ⚡                  4개, 림 집중 [0.70,0.82,0.90,0.97]
5. [Lines] 방사형 장력선 ⚡           24개, 림 강조 (0.10→0.35→0.80)
6. [Shadow] 인워드 섀도우 ⚡          55%-100%, opacity 0.30
7. [Highlight] 장력 벨트 🆕          90%-100%, 밝은 띠 (0.55)
8. [Structure] 림 앵커 🆕            24개 틱, 8px 안쪽
9. [Effect] 리플 엣지                103%, 106% 점선 타원
```

**⚡ = 파라미터 최적화** | **🆕 = 신규 추가**

### 비활성화된 요소

```
❌ 외부 화살표 (Radial Arrows)       24개 바깥쪽 화살표
   이유: "톤필드를 당기는" 시각적 느낌 없음
   위치: 라인 1105-1114 (false && 조건)
```

---

## 📊 효과별 상세 파라미터 설정값

### 1️⃣ 등고선 (Contour Lines) - 림 집중 배치

**코드 위치**: 라인 156-173

**설정값**:
```typescript
const CONTOUR_CONFIG = {
  enabled: true,

  // 림 집중 비율
  ratios: [0.70, 0.82, 0.90, 0.97],  // 기존: [0.85, 0.70, 0.55, 0.40]

  // 색상 및 스타일
  color: "#3bb18f",                   // Teal green
  baseOpacity: 0.18,                  // 기존: 0.35 → 은은하게
  opacityStep: 0.06,                  // 안쪽으로 투명도 감소

  // 선 두께
  outerStrokeWidth: 0.9,              // 기존: 1.2 → 가늘게
  innerStrokeWidth: 0.5,              // 기존: 0.6 → 가늘게
};
```

**효과**:
- 중앙 0-70%: 깨끗하게 비움
- 림 주변 70-97%: 4개 등고선 촘촘 배치
- **"장력이 가장자리로 집중"** 명확 표현

**렌더링**: 4개 `<ellipse>` 요소 (라인 845-861)

**물리적 의미**: 등압선과 같이 동일한 장력 분포를 표현

---

### 2️⃣ 방사형 장력선 (Radial Tension Lines) - 림 강조

**코드 위치**: 라인 178-197 (CONFIG), 863-891 (렌더링)

**설정값**:
```typescript
const RADIAL_TENSION_LINES_CONFIG = {
  enabled: true,

  // 개수 및 범위
  count: 24,                          // 기존: 16 → 촘촘하게
  startRatio: 0.40,                   // 기존: 0.58 → 딤플 안쪽
  endRatio: 1.03,                     // 기존: 0.97 → 림 바깥

  strokeWidth: 1.0,                   // 기존: 1.1
};
```

**그라데이션** (라인 531-555):
```typescript
<radialGradient id="tension-line-stroke-gradient">
  <stop offset="0%"   stopOpacity={0.10} />  // 중심: 매우 약함
  <stop offset="55%"  stopOpacity={0.35} />  // 중간
  <stop offset="100%" stopOpacity={0.80} />  // 림: 최대 강도
</radialGradient>

// 기존: offset="0%" opacity 0.7, offset="100%" opacity 0.2
// 변경: 방향 뒤집기 - 림에서 강조
```

**효과**:
- 24개 직선이 딤플 내부(40%)에서 시작
- 림(103%)까지 뻗어나가며 림을 "때리는" 효과
- 강도가 림에서 최대 (0.80) → **"당겨진 가장자리"** 극대화

**물리적 의미**:
- 팽팽한 장력 = 직선 (곡선 ❌)
- 장력 최대 = 림 (중심 ❌)

---

### 3️⃣ 멤브레인 쉐이딩 (Membrane Shading) - 대비 강화

**코드 위치**: 라인 200-220 (CONFIG), 557-590 (그라데이션)

**설정값**:
```typescript
const MEMBRANE_SHADING_CONFIG = {
  enabled: true,

  // 상단 하이라이트
  topColor: "white",
  topOpacity: 0.35,                   // 기존: 0.25 → 밝게
  topOffset: 0,

  // 중간 투명
  midOffset: 0.45,

  // 하단 그림자
  bottomColor: "black",
  bottomStartOffset: 0.70,
  bottomStartOpacity: 0.10,           // 기존: 0.08 → 진하게
  bottomEndOffset: 1.0,
  bottomEndOpacity: 0.24,             // 기존: 0.18 → 진하게
};
```

**그라데이션 구조**:
```
상단 0%:    white opacity 0.35  (빛 반사 강조)
중간 45%:   white opacity 0     (투명 영역)
하단 70%:   black opacity 0.10  (그림자 시작)
하단 100%:  black opacity 0.24  (그림자 최대)
```

**효과**:
- 상단 더 밝음 → 빛 반사 강조
- 하단 더 어두움 → 그림자 깊이
- 타원이 "볼록"하고 입체적
- 림 주변 상대적 어두움 → **"가장자리 당김"** 강화

**물리적 의미**: 금속 표면의 3D 곡률과 장력으로 인한 변형

---

### 4️⃣ 벡터 필드 그라데이션 (Vector Field Gradient)

**코드 위치**: 라인 223-241 (CONFIG), 745-808 (렌더링)

**설정값**:
```typescript
const VECTOR_FIELD_CONFIG = {
  enabled: true,
  stripeCount: 24,                    // 24개 섹터
  stripeIntensity: 0.04,              // 4% 밝기 변조

  baseColor: "#86efac",
  brightColor: "#a7f3c0",             // 밝은 섹터
  darkColor: "#6ee7a5",               // 어두운 섹터
  baseOpacity: 0.4,
};
```

**수학적 모델**:
```typescript
brightness = Math.sin(i * Math.PI / 6) * 0.04
// i: 섹터 인덱스 (0-23)
// 주기: 6 → 360°에 약 4회 반복
```

**효과**:
- 24개 섹터가 밝기 교대
- 장력이 방향성을 가지고 "진동"하는 느낌

**물리적 의미**: 장력의 방향성 흐름 (벡터 필드)

---

### 5️⃣ 인워드 섀도우 (Inward Shadow) - 범위 확장

**코드 위치**: 라인 243-257 (CONFIG), 616-635 (그라데이션)

**설정값**:
```typescript
const INWARD_SHADOW_CONFIG = {
  enabled: true,

  // 범위 설정
  startOffset: 0.55,                  // 기존: 0.65 → 중앙 쪽으로
  endOffset: 1.0,

  // 색상 및 투명도
  color: "#1f5b52",                   // Dark teal
  startOpacity: 0.0,                  // 55% 지점: 투명
  endOpacity: 0.30,                   // 기존: 0.22 → 진하게
};
```

**그라데이션**:
```typescript
<radialGradient id="inward-shadow-gradient">
  <stop offset="55%" stopOpacity={0.0}  />   // 중심 쪽 투명
  <stop offset="100%" stopOpacity={0.30} />  // 림 쪽 그림자
</radialGradient>
```

**효과**:
- 55%-100% 영역에 그림자 (기존 65%-100%)
- 림 주변 **"눌림"** 효과 강화
- 외곽에서 안쪽으로 말려드는 장력 명확

**물리적 의미**: 림에서 팽팽하게 당겨져 안쪽으로 휘어지는 금속 표면

---

### 6️⃣ 장력 벨트 (Tension Belt) - 🆕 신규 레이어

**코드 위치**: 라인 282-303 (CONFIG), 637-667 (그라데이션), 948-957 (렌더링)

**설정값**:
```typescript
const TENSION_BELT_CONFIG = {
  enabled: true,

  // 위치
  insetOffset: 6,                     // 림에서 안쪽 6px

  // 그라데이션 범위
  innerStartOffset: 0.0,              // 내부 투명
  innerMidOffset: 0.75,               // 75%까지 투명
  beltStartOffset: 0.90,              // 90%에서 벨트 시작
  beltEndOffset: 1.0,                 // 100%에서 끝

  // 색상 및 투명도
  innerColor: "#ffffff",
  beltColor: "#ffffff",
  innerOpacity: 0.0,
  beltPeakOpacity: 0.55,              // 90% 지점 최대
  beltEndOpacity: 0.0,                // 100% 지점 사라짐
};
```

**그라데이션 구조**:
```
0%:    opacity 0.0   (내부 완전 투명)
75%:   opacity 0.0   (계속 투명)
90%:   opacity 0.55  (급격히 밝아짐) ← 벨트 하이라이트
100%:  opacity 0.0   (림에서 사라짐)
```

**효과**:
- 림 직전(90%)에서 밝은 하이라이트 띠
- **"여기까지가 장력 경계"** 명확 표현
- 드럼 헤드 bearing edge 하이라이트 효과
- 톤필드가 림에 단단히 고정되고 극도로 팽팽한 느낌

**물리적 의미**: 막이 림에 고정되는 경계 영역

---

### 7️⃣ 림 앵커 (Rim Anchors) - 🆕 신규 레이어

**코드 위치**: 라인 306-320 (CONFIG), 976-1003 (렌더링)

**설정값**:
```typescript
const RIM_ANCHOR_CONFIG = {
  enabled: true,

  // 앵커 설정
  count: 24,                          // 장력선과 동일
  length: 8,                          // 안쪽으로 8px

  // 색상 및 스타일
  stroke: "#166f5b",                  // 진한 청록색
  strokeWidth: 0.9,
  opacity: 0.55,
};
```

**렌더링 로직**:
```typescript
// 360° / 24 = 15° 간격
const angle = (i / 24) * 2 * Math.PI;

// 림 위에서 시작
const sx = cx + Math.cos(angle) * rx;
const sy = adjustedCy + Math.sin(angle) * ry;

// 안쪽(8px)으로 향함
const ex = cx + Math.cos(angle) * (rx - 8);
const ey = adjustedCy + Math.sin(angle) * (ry - 8);

<line x1={sx} y1={sy} x2={ex} y2={ey}
      strokeLinecap="round" />
```

**효과**:
- 림이 24개 앵커로 **단단히 고정**
- 방사형 장력선(24개)과 개수·방향 일치
- **"전체가 하나의 장력 시스템"** 표현
- 드럼 헤드 lug 포인트처럼 국소 고정

**물리적 의미**: 360° 균등 분포된 고정점 (실제 핸드팬 제작 방식)

---

### 8️⃣ 리플 엣지 (Ripple Edge)

**코드 위치**: 라인 260-280 (CONFIG), 760-785 (렌더링)

**설정값**:
```typescript
const RIPPLE_EDGE_CONFIG = {
  enabled: true,                      // ✅ 활성화

  layers: [
    { factor: 1.03, strokeWidth: 0.6, opacity: 0.40, dashArray: "3 4" },
    { factor: 1.06, strokeWidth: 0.4, opacity: 0.28, dashArray: "1.5 4.5" },
  ],

  color: "#7fd5b6",
  useBlur: true,
  blurAmount: 0.8,
};
```

**효과**:
- 경계 밖 3%, 6%에 점선 타원
- 응력이 바깥으로 전파되는 미세 파동

**물리적 의미**: 금속 표면의 응력선 (stress line)

---

### ❌ 비활성화: 외부 화살표 (Radial Arrows)

**코드 위치**: 라인 1105-1114

**비활성화 방법**:
```typescript
{/* Radial tension arrows: 비활성화 (타원을 당기는 느낌 없음) */}
{false && dirs.map((t, i) => {
  const { shaft, head } = arrowPath(t);
  return (
    <g key={i}>
      <path d={shaft} stroke={color} strokeWidth={2} fill="none" />
      <path d={head} stroke={color} strokeWidth={2} fill="none" />
    </g>
  );
})}
```

**비활성화 이유**:
- 타원 외부에서 바깥쪽으로 향하는 24개 화살표
- **"톤필드를 당기는"** 시각적 느낌을 주지 못함
- 오히려 "밀어내는" 느낌으로 오인될 수 있음
- 장력 집중 원칙에 부합하지 않음

**대체 요소**:
- 방사형 장력선 (안쪽 → 림): 당기는 방향 정확히 표현
- 림 앵커: 고정점 구조로 당김 효과 강화

---

## 🎨 색상 팔레트 및 시각적 계층

### 색상 체계

| 레이어 | 색상 코드 | RGB | 용도 |
|--------|-----------|-----|------|
| 등고선 | `#3bb18f` | (59, 177, 143) | 장력 레벨 구분 |
| 장력선 | `#2bb5a0` | (43, 181, 160) | 방사형 방향 |
| 벡터 필드 (밝음) | `#a7f3c0` | (167, 243, 192) | 힘의 장 하이라이트 |
| 벡터 필드 (어두움) | `#6ee7a5` | (110, 231, 165) | 힘의 장 베이스 |
| 인워드 섀도우 | `#1f5b52` | (31, 91, 82) | 림 그림자 |
| 장력 벨트 | `#ffffff` | (255, 255, 255) | 림 경계 하이라이트 |
| 림 앵커 | `#166f5b` | (22, 111, 91) | 고정점 강조 |
| 리플 엣지 | `#7fd5b6` | (127, 213, 182) | 외부 전파 |

**색상 선택 원칙**:
- Teal/Green 계열로 통일 (일관성)
- 밝기 차이로 레이어 구분
- 과도한 채도 회피 (은은함)

### 시각적 계층

```
[배경] 기본 그라데이션
  ↓
[방향성] 벡터 필드 (24개 섹터)
  ↓
[곡률] 멤브레인 쉐이딩 (상/하 대비)
  ↓
[레벨] 등고선 (림 집중)
  ↓
[방향] 장력선 (딤플→림, 24개)
  ↓
[깊이] 인워드 섀도우 (림 그림자)
  ↓
[경계] 장력 벨트 (90%-100% 밝은 띠) 🆕
  ↓
[구조] 림 앵커 (24개 고정 틱) 🆕
  ↓
[전파] 리플 엣지 (외부 파동)
```

---

## 📐 파라미터 변경 이력

### 최적화 비교표 (v1.0 → v2.1)

| 레이어 | 파라미터 | v1.0 | v2.1 | 변화율 | 효과 |
|--------|----------|------|------|--------|------|
| 등고선 | ratios | [0.85,0.70,0.55,0.40] | [0.70,0.82,0.90,0.97] | 림 집중 | 가장자리 밀도 ↑ |
| 등고선 | baseOpacity | 0.35 | 0.18 | -49% | 은은함 |
| 등고선 | outerStrokeWidth | 1.2 | 0.9 | -25% | 섬세함 |
| 장력선 | count | 16 | 24 | +50% | 촘촘함 |
| 장력선 | startRatio | 0.58 | 0.40 | -31% | 중심 고정 |
| 장력선 | endRatio | 0.97 | 1.03 | +6% | 림 연장 |
| 장력선 | gradient | 중심→외곽 | 림 강조 | 역전 | 물리 정확성 |
| 장력선 | max opacity | 0.7 | 0.80 | +14% | 림 강조 |
| 멤브레인 | topOpacity | 0.25 | 0.35 | +40% | 하이라이트 |
| 멤브레인 | bottomEndOpacity | 0.18 | 0.24 | +33% | 그림자 |
| 인워드 | startOffset | 0.65 | 0.55 | -15% | 범위 확장 |
| 인워드 | endOpacity | 0.22 | 0.30 | +36% | 강도 증가 |

### 신규 추가 (v2.0 → v2.1)

| 레이어 | 핵심 파라미터 | 값 | 효과 |
|--------|---------------|-----|------|
| 장력 벨트 | beltStartOffset | 0.90 | 림 안쪽 90%부터 |
| 장력 벨트 | beltPeakOpacity | 0.55 | 최대 밝기 55% |
| 림 앵커 | count | 24 | 24개 고정점 |
| 림 앵커 | length | 8px | 안쪽 틱 길이 |

### 비활성화 (v2.1)

| 요소 | 개수 | 비활성화 이유 |
|------|------|--------------|
| 외부 화살표 | 24개 | 당기는 느낌 없음, 밀어내는 오인 가능 |

---

## 🔬 설계 원칙 및 의사결정

### 1. 물리적 정확성 우선

**원칙**:
- 팽팽한 장력 = 직선 (곡선 ❌)
- 장력 최대 지점 = 림 (중앙 ❌)
- 고정점 = 360° 균등 분포 (불규칙 ❌)

**적용 사례**:
- 장력선: Bezier curve → 직선 변경
- 장력선 그라데이션: 중심 진함 → 림 진함 역전
- 외부 화살표: 비활성화 (당기는 방향 아님)

### 2. 정보 밀도 집중 전략

**구간별 밀도**:
```
중앙 (0-70%)     │ 깨끗함      │ 0%   │ 매끈한 표면
중간 (70-90%)    │ 점진적 증가 │ 30%  │ 전환 영역
림 (90-100%)     │ 최대 집중   │ 100% │ 장력 집중
```

**구현 방법**:
- 등고선 4개를 70-97%에 배치
- 장력 벨트를 90-100%에 배치
- 인워드 섀도우를 55-100%로 확장
- 림 앵커를 정확히 림(100%) 위치에 배치

### 3. 시각적 계층 최적화

**레이어 순서 근거**:
1. 배경 (그라데이션) → 기본 톤 설정
2. 방향성 (벡터 필드) → 힘의 방향
3. 곡률 (멤브레인) → 3D 입체감
4. 레벨 (등고선) → 장력 분포
5. 방향 (장력선) → 명확한 방향성
6. 깊이 (그림자) → 3D 깊이
7. 경계 (벨트) → 하이라이트
8. 구조 (앵커) → 고정점
9. 전파 (리플) → 외부 효과

**상호작용 고려**:
- 그림자(어두움) + 벨트(밝음) = 경계 강조
- 장력선(방향) + 앵커(고정) = 시스템 통합
- 등고선(레벨) + 장력선(방향) = 분포+방향

---

## 🎓 의사결정 히스토리

### 1. 등고선 림 집중 배치
**날짜**: 2025-11-16
**문제**: [0.85, 0.70, 0.55, 0.40]은 정보가 고르게 분산
**결정**: [0.70, 0.82, 0.90, 0.97]로 림에 몰기
**효과**: 중앙 깨끗, 림 촘촘 → "가장자리 장력 집중" 명확

### 2. 장력선 그라데이션 역전
**날짜**: 2025-11-16
**문제**: 중심 진하게 → 외곽 약하게는 물리적 부정확
**결정**: 3-stop gradient (0.10 → 0.35 → 0.80) 림 강조
**효과**: 림을 "때리는" 느낌, 당겨진 가장자리 명확

### 3. 장력 벨트 추가
**날짜**: 2025-11-16
**목적**: 림 안쪽 밝은 띠로 경계 명확화
**근거**: 드럼 헤드 bearing edge 하이라이트
**효과**: "여기까지가 장력 경계" 명확 표현

### 4. 림 앵커 추가
**날짜**: 2025-11-16
**목적**: 24개 고정점으로 림 고정 구조 표현
**근거**: 드럼 헤드 lug 포인트 개념
**효과**: 장력선과 방향 일치 → "하나의 시스템"

### 5. 외부 화살표 비활성화
**날짜**: 2025-11-16
**문제**: 타원 외부 바깥쪽 화살표 24개
**피드백**: "톤필드를 당기는 느낌이 나지 않음"
**결정**: `false &&` 조건으로 비활성화 (라인 1106)
**효과**: 장력 집중 의도 명확, 혼란 제거

---

## 📊 코드 구조 및 라인 맵

### Configuration Objects

| 객체명 | 라인 | 파라미터 수 | 설명 |
|--------|------|-------------|------|
| `CONTOUR_CONFIG` | 156-173 | 7개 | 등고선 (림 집중) |
| `RADIAL_TENSION_LINES_CONFIG` | 178-197 | 9개 | 장력선 (24개, 림 강조) |
| `MEMBRANE_SHADING_CONFIG` | 200-220 | 10개 | 멤브레인 (대비 강화) |
| `VECTOR_FIELD_CONFIG` | 223-241 | 7개 | 벡터 필드 |
| `INWARD_SHADOW_CONFIG` | 243-257 | 5개 | 인워드 섀도우 (확장) |
| `RIPPLE_EDGE_CONFIG` | 260-280 | 5개 | 리플 엣지 |
| `TENSION_BELT_CONFIG` | 282-303 | 10개 | 🆕 장력 벨트 |
| `RIM_ANCHOR_CONFIG` | 306-320 | 5개 | 🆕 림 앵커 |

**총 CONFIG 파라미터**: 58개

### SVG Definitions

| 요소 | 라인 | 타입 | 설명 |
|------|------|------|------|
| `rippleBlur` | 478-481 | filter | 리플 블러 필터 |
| `tension-line-stroke-gradient` | 531-555 | radialGradient | 장력선 (림 강조) |
| `membrane-shading-gradient` | 557-590 | linearGradient | 멤브레인 (4-stop) |
| `inward-shadow-gradient` | 616-635 | radialGradient | 인워드 섀도우 |
| `tension-belt-gradient` | 637-667 | radialGradient | 🆕 장력 벨트 (4-stop) |

### Rendering Layers

| 레이어 | 라인 | 요소 타입 | 개수 | 설명 |
|--------|------|-----------|------|------|
| Vector Field | 745-808 | `<path>` | 24개 | 섹터 렌더링 |
| Membrane Shading | 835-842 | `<path>` | 1개 | 도넛 path |
| Contour Lines | 845-861 | `<ellipse>` | 4개 | 등고선 |
| Tension Lines | 863-891 | `<line>` | 24개 | 장력선 |
| Inward Shadow | 937-946 | `<path>` | 1개 | 그림자 |
| Tension Belt | 948-957 | `<path>` | 1개 | 🆕 밝은 띠 |
| Rim Anchors | 976-1003 | `<line>` | 24개 | 🆕 틱 마크 |
| Ripple Edge | 760-785 | `<ellipse>` | 2개 | 리플 |
| ❌ External Arrows | 1105-1114 | `<path>` | 0개 | 비활성화 |

**총 렌더링 요소**: 81개 (화살표 제외)

---

## 📞 외부 전문가 분석 요청 사항

### 검토 항목 및 평가 기준

#### 1. 물리적 타당성 (★★★★★)
**질문**:
- 림 집중 장력 분포가 실제 핸드팬 물리와 일치하는가?
- 직선 장력선이 팽팽한 금속막을 정확히 표현하는가?
- 24개 앵커 포인트 분포가 실제 제작 방식과 부합하는가?
- 외부 화살표 비활성화 결정이 물리적으로 타당한가?

**평가 지표**:
- 장력 분포 정확도
- 물리 법칙 준수도
- 실제 악기와의 일치도

#### 2. 시각적 효과성 (★★★★☆)
**질문**:
- "림에 장력 집중" 의도가 명확히 전달되는가?
- 8개 레이어의 상호작용이 조화로운가?
- 정보 밀도 그라데이션(0-70%-90-100%)이 자연스러운가?
- 장력 벨트와 림 앵커가 효과적인가?

**평가 지표**:
- 직관성
- 가독성
- 시각적 명확성

#### 3. 파라미터 최적성 (★★★★☆)
**질문**:
- 등고선 비율 [0.70, 0.82, 0.90, 0.97]이 적절한가?
- 장력선 24개가 과하지/부족하지 않은가?
- 장력 벨트 opacity 0.55가 적절한가?
- 림 앵커 길이 8px가 적절한가?

**평가 지표**:
- 밀도 적정성
- 대비 강도
- 세부 가시성

#### 4. 색상 및 접근성 (★★★☆☆)
**질문**:
- Teal/Green 계열 색상이 장력 표현에 적합한가?
- 색상 대비가 WCAG 2.1 AA/AAA 기준을 만족하는가?
- 색각 이상자가 구분 가능한가?
- 다크 모드 대응이 필요한가?

**평가 지표**:
- 대비비 (4.5:1 이상)
- 색각 이상자 가시성
- 다중 환경 호환성

#### 5. 확장 가능성 (★★★★☆)
**질문**:
- 다른 크기/형태의 톤필드에 적용 가능한가?
- 실시간 장력 변화 시뮬레이션으로 확장 가능한가?
- 애니메이션 추가 시 성능 영향은?
- 파라미터 외부 제어(API) 가능한가?

**평가 지표**:
- 재사용성
- 확장성
- 유지보수성

#### 6. 성능 및 최적화 (★★★☆☆)
**질문**:
- SVG 복잡도(81 요소)가 허용 범위인가?
- 렌더링 성능이 적절한가? (60fps 유지?)
- 추가 최적화 기회가 있는가? (예: CSS, Canvas)
- 메모리 사용량은?

**평가 지표**:
- 렌더링 시간
- 메모리 사용량
- 확장 시 성능 저하

---

## 📈 향후 개선 방향

### Phase 3: 동적 시각화 (우선순위: 높음)

**1. 실시간 장력 시뮬레이션**
```typescript
interface TensionSimulation {
  strikeForce: number;        // 타격 강도 (0-1)
  frequency: number;          // 진동 주파수 (Hz)
  dampingFactor: number;      // 감쇠 계수
  timeElapsed: number;        // 경과 시간 (ms)
}

// 장력 분포 실시간 계산
const calculateTensionDistribution = (
  params: TensionSimulation
): TensionField => {
  // 유한요소해석(FEA) 기반 계산
  // 등고선 ratios 동적 조정
  // 장력선 opacity 동적 변경
};
```

**2. 주파수별 진동 모드**
- 1st mode: 기본 톤 (가장 간단한 패턴)
- 2nd mode: 옥타브 (더 복잡한 패턴)
- 3rd mode: 배음 (고차 패턴)

**3. 재료 특성 반영**
- 강철 vs 니트라이드 강철
- 두께 변화에 따른 장력 분포
- 템퍼링 효과

### Phase 4: 인터랙티브 요소 (우선순위: 중간)

**1. 호버 효과**
```typescript
// 특정 장력선 호버 시
onTensionLineHover = (lineIndex: number) => {
  // 해당 장력선 opacity 0.80 → 1.0
  // 대응하는 림 앵커 강조
  // 툴팁 표시: "장력 방향 #15 (157.5°)"
};
```

**2. 클릭 정보**
```typescript
// 특정 지점 클릭 시
onPointClick = (x: number, y: number) => {
  const tension = calculateTensionAt(x, y);
  showTooltip({
    position: { x, y },
    data: {
      tension: `${tension.toFixed(2)} N/m`,
      distance: `${distanceFromCenter}%`,
      angle: `${angle.toFixed(1)}°`
    }
  });
};
```

**3. 드래그 조정**
- 딤플 위치 드래그
- 타원 크기 조정
- 앵커 개수 변경 (16/24/32)

### Phase 5: 애니메이션 (우선순위: 낮음)

**1. 장력선 펄스**
```typescript
// 타격 시뮬레이션
const animateTensionPulse = () => {
  // 중심에서 시작
  // 림으로 전파 (0.5초)
  // 반사파 (0.3초)
  // 감쇠 (1초)
};
```

**2. 리플 엣지 확산**
```typescript
// 외부 전파 애니메이션
const animateRippleExpansion = () => {
  // factor 1.03 → 1.10 (2초)
  // opacity 0.40 → 0.0 (페이드아웃)
};
```

**3. 벡터 필드 회전**
```typescript
// 진동 모드 시각화
const rotateVectorField = (frequency: number) => {
  // 섹터 밝기 패턴 회전
  // 속도 = frequency * 0.1 (rpm)
};
```

### Phase 6: 물리 엔진 연동 (우선순위: 연구)

**1. FEA 데이터 통합**
- COMSOL/ANSYS 출력 파싱
- 메시 데이터 → SVG 변환
- 실시간 응력 분포 표시

**2. 음향 연동**
- Web Audio API 통합
- 주파수 스펙트럼 → 시각화
- 실시간 사운드 분석

---

## 📋 기술 통계

### 코드 복잡도

| 지표 | 값 | 비고 |
|------|-----|------|
| 총 라인 수 | ~1200 | TypeScript + JSX |
| CONFIG 객체 | 8개 | 58개 파라미터 |
| SVG 정의 | 5개 | gradient + filter |
| 렌더링 요소 | 81개 | 화살표 제외 |
| 활성 레이어 | 8개 | 등고선~리플 |
| 비활성 요소 | 1개 | 외부 화살표 |

### 렌더링 성능 (예상)

| 항목 | 값 | 측정 방법 |
|------|-----|-----------|
| 초기 렌더링 | <50ms | Chrome DevTools |
| 리페인트 | <16ms | 60fps 유지 |
| 메모리 사용 | <5MB | Heap snapshot |
| DOM 노드 | ~100개 | Elements 탭 |

### 파라미터 통계

| 레이어 | 파라미터 수 | 조정 가능 | 의존성 |
|--------|-------------|-----------|--------|
| 등고선 | 7 | 7 | 독립 |
| 장력선 | 9 | 9 | 독립 |
| 멤브레인 | 10 | 10 | 독립 |
| 벡터 필드 | 7 | 7 | 독립 |
| 인워드 | 5 | 5 | 독립 |
| 리플 | 5 | 5 | 독립 |
| 장력 벨트 | 10 | 10 | 독립 |
| 림 앵커 | 5 | 5 | 독립 |
| **합계** | **58** | **58** | **0** |

---

## 🏆 핵심 성과 지표 (KPI)

### 물리적 정확성
- ✅ 직선 장력선 (팽팽함 표현)
- ✅ 림 집중 분포 (물리 법칙)
- ✅ 24개 균등 고정점 (실제 구조)
- ✅ 외부 화살표 제거 (오인 방지)

### 시각적 명확성
- ✅ 중앙 70% 깨끗 (정보 밀도 0%)
- ✅ 림 90-100% 집중 (정보 밀도 100%)
- ✅ 8개 레이어 조화 (계층 최적화)
- ✅ 경계 하이라이트 (장력 벨트)

### 기술적 완성도
- ✅ 58개 파라미터 독립 제어
- ✅ 81개 요소 효율 렌더링
- ✅ 0 의존성 (완전 독립)
- ✅ 실시간 조정 가능

---

**문서 버전**: 2.1 (Final)
**최종 커밋**: 미커밋 (외부 화살표 비활성화 + 문서 업데이트)
**변경 이력**:
- v1.0: 초기 6개 레이어 구현
- v2.0: 림 집중 최적화 + 2개 레이어 추가 (장력 벨트, 림 앵커)
- v2.1: 외부 화살표 비활성화 + 최종 문서 정리

**총 개발 단계**: 3단계
**총 커밋 수**: 6회 (예정 +1)
**작성자**: Claude Code with SuperClaude Framework
